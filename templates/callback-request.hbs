<form class="sta-callbacks-form">
  <div class="sta-callback-body">
    {{{bodyHtml}}}
  </div>

  <hr>

  <!-- Display the selected value/directive -->
  {{#if selectedValueName}}
    <div class="sta-callback-value-header">
      <p class="sta-callback-value-label">
        {{localize "sta-officers-log.callback.usingValue"}}
        <strong>{{selectedValueName}}</strong>
      </p>
    </div>
  {{/if}}

  <!-- Hidden form fields for value and valueState (pre-selected by server) -->
  <input type="hidden" name="valueId" value="{{selectedValueId}}" />
  <input type="hidden" name="valueState" value="{{selectedValueState}}" />

  <!-- Log selection as big buttons (max 3 shown) -->
  {{#if hasLogs}}
    <div class="sta-callback-logs-buttons">
      {{#each logsForButtons}}
        <button type="button" 
                class="sta-callback-log-button" 
                data-log-id="{{this.id}}"
                data-action="select-log">
          {{{this.name}}}
        </button>
      {{/each}}
    </div>

    <!-- "Choose another log" link if more than 3 logs -->
    {{#if hasMoreLogs}}
      <div class="sta-callback-more-logs">
        <button type="button" 
                class="sta-callback-show-all-link" 
                data-action="show-all-logs">
          {{localize "sta-officers-log.callback.chooseAnother"}}
        </button>
      </div>
    {{/if}}

    <!-- Dropdown for all logs (initially hidden) -->
    {{#if hasMoreLogs}}
      <div class="sta-callback-all-logs-selector" style="display:none">
        <div class="form-group">
          <label>{{localize "sta-officers-log.callback.logLabel"}}</label>
          <select name="logId" data-hook="allLogsSelect">
            <option value="">— Select a log —</option>
            {{#each logs}}
              <option value="{{this.id}}">{{{this.name}}}</option>
            {{/each}}
          </select>
        </div>
        <button type="button" 
                class="sta-callback-confirm-btn dialog-button default" 
                data-action="confirm-log"
                disabled>
          {{localize "sta-officers-log.callback.confirmSelection"}}
        </button>
      </div>
    {{/if}}

  {{else}}
    <p class="hint">{{localize "sta-officers-log.callback.noUnusedHint"}}</p>
  {{/if}}

  <!-- Footer with Skip button -->
  <footer class="dialog-buttons sta-callbacks-buttons">
    <button type="button"
            class="dialog-button"
            data-action="no">
      {{localize "sta-officers-log.callback.skip"}}
    </button>
  </footer>

</form>

